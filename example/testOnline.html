<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test2</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="../JsCsv.min.js"></script>
    <script type="text/javascript">
        window.onload = function () {
            $('.button').on('click', function (e) {
                CsvWidget.do_work('myWidget');
                e.preventDefault();
            });
        };
        var CsvWidget = (function () {
            var self = {};

            self.do_work = function (div) {
                var csv = document.getElementById("csv").value;
                var header = document.getElementById("header").value;
                var headerKey = header.split(document.getElementById("separator").value);
                var headerInfo = {};
                headerInfo["name"] = [];
                headerInfo["datatype"] = [];
                for (var i = 0; i < headerKey.length; i++) {
                    var name = headerKey[i].substring(0, headerKey[i].indexOf('('));
                    var value = headerKey[i].substring(headerKey[i].indexOf('(') + 1, headerKey[i].indexOf(')'));
                    headerInfo["name"].push(name);
                    headerInfo["datatype"].push(value);
                }
                var csv = new JsCsv.Csv(csv, document.getElementById("separator").value, headerInfo);
                var output = csv.getGeoJSon({RA: "RA", DEC: "DEC", ID: "ID"});
                output = JSON.stringify(output, null, true);
                document.getElementById(div).innerHTML = output;
            };
            return self;
        })();

    </script>
</head>
<body>
<h1>Example 1 : Parsing a CSV</h1>
<h2>Metadata and datatype</h2>
Specifies the Header and the datatype. Each element of the Header must have the same separator as the data.<br/>
<textarea id="header" rows="1" cols="100">
ID(string),RA(double),DEC(double),VAL1(string),VAL2(string)
</textarea>
<h2>Separator</h2>
<input id="separator" value="," size="5"/>
<h2>The data</h2>
<textarea id="csv" rows="10" cols="50">
# 1st line is the header
ID,RA,DEC,VAL1,VAL2
ID1,3.566,12.444,VAL1,VAL2
ID2,33.23,34.4,VAL11,VAL21
</textarea>
<a class="button" href="#">
    <img src="http://findicons.com/files/icons/109/play_stop_pause/128/play1disabled.png" alt="sublit" height="20"
         width="20"/>Submit
</a>
<h2>Output</h2>
<pre id="myWidget"></pre>
</body>

</body>
</html>
